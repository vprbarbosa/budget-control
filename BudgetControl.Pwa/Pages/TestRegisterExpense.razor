@page "/test-expense"
@inject BudgetControl.Pwa.Infrastructure.Application.CreateBudgetCycleUseCase CreateCycle
@inject BudgetControl.Pwa.Infrastructure.Application.RegisterExpenseUseCase RegisterExpense

<h3>Test Register Expense</h3>

<button @onclick="Create">Criar ciclo</button>
<button @onclick="AddExpense" disabled="@(_cycleId == null)">Registrar despesa</button>

<p>CycleId: @_cycleId</p>

@code {
    private Guid? _cycleId;

    private async Task Create()
    {
        _cycleId = await CreateCycle.ExecuteAsync(
            "Fonte Teste",
            DateOnly.FromDateTime(DateTime.Today),
            30,
            1000m);
    }

    private async Task AddExpense()
    {
        await RegisterExpense.ExecuteAsync(
            _cycleId!.Value,
            50m,
            "Teste");
    }
}
